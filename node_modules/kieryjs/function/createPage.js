// import all package, the file needed
const _e = require('express');
const chalk = require('chalk');
const _path = require('path')
const { app } = require('./createServer')

// create the function "createPage" with the parametter called "config" (is an object)
function createPage(config){
    renderFile = config.renderFile; // get the file to rendering
    path = config.path; // get the path to the page
    includeVariableOnPage = config.includeVariableOnPage // get if he include variable on the file

    if (includeVariableOnPage === true){ // if includeVariableOnPage is set to "true".
        varPage = config.varPage; // get an object with all variable included to the file
        app.get('/' + path, (req, res) => {
            res.render(`../views/${renderFile}`, varPage) // render the page
        })
    } else if (includeVariableOnPage === false) { // if includeVariableOnPage is set to "false"
        app.get('/' + path, (req, res) => {
            res.render(`../views/${renderFile}`) // render the page without included variable
        })
    } else {
        console.log(chalk.red('[ERROR] The createPage() function on the param "config.includeVariableOnPage" is not a boolean.'));
        app.get('/' + path, (req, res) => {
            res.send('<h2 style="color: red">[ERROR] The createPage() function on the param "config.includeVariableOnPage" is not a boolean.</h2>')
        })
    }
}

module.exports.createPage = createPage;